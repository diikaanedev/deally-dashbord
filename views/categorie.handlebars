<main class="page-content">
    <div class="container">
        <div class="page-header">
            <h1 class="page-header__title">Categories </h1>
        </div>
        <div class="page-tools">
            <div class="page-tools__breadcrumbs">
                <div class="breadcrumbs">
                    <div class="breadcrumbs__container">
                        <ol class="breadcrumbs__list">
                            <li class="breadcrumbs__item">
                                <a class="breadcrumbs__link" href="/">
                                    <svg class="icon-icon-home breadcrumbs__icon">
                                        <use xlink:href="#icon-home"></use>
                                    </svg>
                                    <svg class="icon-icon-keyboard-right breadcrumbs__arrow">
                                        <use xlink:href="#icon-keyboard-right"></use>
                                    </svg>
                                </a>
                            </li>
                            <li class="breadcrumbs__item disabled"><a class="breadcrumbs__link"
                                    href="#"><span>Shop</span>
                                    <svg class="icon-icon-keyboard-right breadcrumbs__arrow">
                                        <use xlink:href="#icon-keyboard-right"></use>
                                    </svg></a>
                            </li>
                            <li class="breadcrumbs__item active"><span class="breadcrumbs__link">Categories</span>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="page-tools__right">
                <div class="page-tools__right-row">
                    {{!-- <div class="page-tools__right-item"><a class="button-icon" href="#"><span
                                class="button-icon__icon">
                                <svg class="icon-icon-print">
                                    <use xlink:href="#icon-print"></use>
                                </svg></span></a>
                    </div> --}}
                    <div class="page-tools__right-item">
                        <button class="button-add button-add--blue" data-modal="#addProduct"><span
                                class="button-add__icon">
                                <svg class="icon-icon-plus">
                                    <use xlink:href="#icon-plus"></use>
                                </svg></span><span class="button-add__text"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="toolbox">
            <div class="toolbox__row row gutter-bottom-xs">
                <div class="toolbox__left col-12 col-lg">
                    <div class="toolbox__left-row row row--xs gutter-bottom-xs">
                        {{!-- <div class="form-group form-group--inline col-12 col-sm-auto">
                            <label class="form-label">Show</label>
                            <div class="input-group input-group--white input-group--append">
                                <input class="input input--select" type="text" value="10" size="1"
                                    data-toggle="dropdown" readonly><span class="input-group__arrow">
                                    <svg class="icon-icon-keyboard-down">
                                        <use xlink:href="#icon-keyboard-down"></use>
                                    </svg></span>
                                <div class="dropdown-menu dropdown-menu--right dropdown-menu--fluid js-dropdown-select">
                                    <a class="dropdown-menu__item active" href="#" tabindex="0" data-value="10">10</a><a
                                        class="dropdown-menu__item" href="#" tabindex="0" data-value="15">15</a><a
                                        class="dropdown-menu__item" href="#" tabindex="0" data-value="20">20</a>
                                    <a class="dropdown-menu__item" href="#" tabindex="0" data-value="25">25</a><a
                                        class="dropdown-menu__item" href="#" tabindex="0" data-value="50">50</a>
                                </div>
                            </div>
                        </div> --}}
                        {{!-- <div class="form-group form-group--inline col col-sm-auto">
                            <div class="input-group input-group--white input-group--append">
                                <select class="input js-input-select" data-placeholder="">
                                    <option value="1" selected="selected">All Categories
                                    </option>
                                    <option value="2">MacBook
                                    </option>
                                    <option value="3">Apple Watch
                                    </option>
                                    <option value="4">AirPods
                                    </option>
                                    <option value="5">iPhone
                                    </option>
                                    <option value="6">IPad
                                    </option>
                                </select><span class="input-group__arrow">
                                    <svg class="icon-icon-keyboard-down">
                                        <use xlink:href="#icon-keyboard-down"></use>
                                    </svg></span>
                            </div>
                        </div> --}}
                        <div class="form-group form-group--inline col-12 col-sm-auto d-none d-sm-block">
                            {{!-- <div class="toolbox__status input-group input-group--white input-group--append">
                                <input class="input input--select" type="text" value="All status" data-toggle="dropdown"
                                    readonly><span class="input-group__arrow">
                                    <svg class="icon-icon-keyboard-down">
                                        <use xlink:href="#icon-keyboard-down"></use>
                                    </svg></span>
                                <div class="dropdown-menu dropdown-menu--right dropdown-menu--fluid js-dropdown-select">
                                    <a class="dropdown-menu__item active" href="#" tabindex="0"
                                        data-value="All status"><span class="marker-item"></span> All status</a>
                                    <a class="dropdown-menu__item" href="#" tabindex="0" data-value="Published"><span
                                            class="marker-item color-green"></span> Published</a><a
                                        class="dropdown-menu__item" href="#" tabindex="0" data-value="Deleted"><span
                                            class="marker-item color-red"></span> Deleted</a>
                                </div>
                            </div> --}}
                        </div>
                    </div>
                </div>
                <div class="toolbox__right col-12 col-lg-auto">
                    <div class="toolbox__right-row row row--xs flex-nowrap">
                        <div class="col col-lg-auto">
                            {{!-- <form class="toolbox__search" method="GET">
                                <div class="input-group input-group--white input-group--prepend">
                                    <div class="input-group__prepend">
                                        <svg class="icon-icon-search">
                                            <use xlink:href="#icon-search"></use>
                                        </svg>
                                    </div>
                                    <input class="input" type="text" placeholder="Search categorie">
                                </div>
                            </form> --}}
                        </div>
                        <div class="col-auto">
                            {{!-- <button class="button-add button-add--blue" data-modal="#addProduct"><span
                                    class="button-add__icon">
                                    <svg class="icon-icon-plus">
                                        <use xlink:href="#icon-plus"></use>
                                    </svg></span><span class="button-add__text"></span>
                            </button> --}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-wrapper">
            <div class="table-wrapper__content table-collapse scrollbar-thin scrollbar-visible">
                <table class="table table--lines">
                    <colgroup>
                        <col width="90px">
                        <col width="100px">
                        <col width="350px">
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                    </colgroup>
                    <thead class="table__header">
                        <tr class="table__header-row">
                            <th>
                                <div class="table__checkbox table__checkbox--all">
                                    <label class="checkbox">
                                        <input class="js-checkbox-all" type="checkbox" data-checkbox-all="product"><span
                                            class="checkbox__marker"><span class="checkbox__marker-icon">
                                                <svg class="icon-icon-checked">
                                                    <use xlink:href="#icon-checked"></use>
                                                </svg></span></span>
                                    </label>
                                </div>
                            </th>
                            <th class="d-none d-lg-table-cell"><span>ID</span>
                            </th>
                            <th class="table__th-sort"><span class="align-middle">Category</span>
                            </th>
                            <th class="table__th-sort d-none d-lg-table-cell"><span class="align-middle">Date</span>
                            </th>
                            <th class="table__th-sort d-none d-sm-table-cell"><span class="align-middle">Status</span>
                            </th>
                            <th class="table__actions"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each categories }}
                        <tr class="table__row">
                            <td class="table__td">
                                <div class="table__checkbox table__checkbox--all">
                                    <label class="checkbox">
                                        <input type="checkbox" data-checkbox="product"><span
                                            class="checkbox__marker"><span class="checkbox__marker-icon">
                                                <svg class="icon-icon-checked">
                                                    <use xlink:href="#icon-checked"></use>
                                                </svg></span></span>
                                    </label>
                                </div>
                            </td>
                            <td class="d-none d-lg-table-cell table__td"><span class="text-grey"># {{id}} </span>
                            </td>
                            <td class="table__td"><span class="text-grey">{{title }}</span>
                            </td>
                            </td>
                            <td class="d-none d-lg-table-cell table__td"><span class="text-grey">{{date}}</span>
                            </td>
                            <td class="d-none d-sm-table-cell table__td">
                                <div class="table__status"><span class="table__status-icon color-{{color}}"></span>
                                    {{statusCategorie}}
                                </div>
                            </td>
                            <td class="table__td table__actions">
                                <div class="items-more">
                                    <button class="items-more__button">
                                        <svg class="icon-icon-more">
                                            <use xlink:href="#icon-more"></use>
                                        </svg>
                                    </button>
                                    <div class="dropdown-items dropdown-items--right">
                                        <div class="dropdown-items__container">
                                            <ul class="dropdown-items__list">
                                                <li class="dropdown-items__item"><a
                                                        class="dropdown-items__link data-update "
                                                        data-value="{{idNormal}}|{{title}}|{{statusCategorie}}|{{idParent}}|{{titleFrench}}|{{contries}}"
                                                        id="modifier" data-modal="#editProduct"><span
                                                            class="dropdown-items__link-icon">
                                                            <svg class="icon-icon-view">
                                                                <use xlink:href="#icon-view"></use>
                                                            </svg></span>Modifier</a>
                                                </li>


                                                <li class="dropdown-items__item"><a
                                                        class="dropdown-items__link data-delete" data-id="{{idNormal}}"
                                                        data-modal="#deleteCategorie"><span
                                                            class="dropdown-items__link-icon">
                                                            <svg class="icon-icon-trash">
                                                                <use xlink:href="#icon-trash"></use>
                                                            </svg></span>Delete</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {{/each}}

                    </tbody>
                </table>
            </div>
            <div class="table-wrapper__footer">

            </div>
        </div>
    </div>
</main>
</div>

<div class="modal modal--panel" id="addProduct">
    <div class="modal__overlay" data-dismiss="modal"></div>
    <div class="modal__wrap">
        <div class="modal__window scrollbar-thin" data-simplebar>
            <div class="modal__content">
                <div class="modal__header">
                    <div class="modal__container">
                        <h2 class="modal__title">Add Categories</h2>
                    </div>
                </div>
                <div class="modal__body">
                    <div class="modal__container">
                        <form method="POST" action="/categories" enctype="multipart/form-data">
                            <div class="row row--md">
                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Categorie Name</label>
                                    <div class="input-group">
                                        <input class="input" name="title" type="text" placeholder="" value="" required>
                                    </div>
                                </div>

                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Categorie Name French</label>
                                    <div class="input-group">
                                        <input class="input" name="tiltleFrench" type="text" placeholder="" value="" required>
                                    </div>
                                </div>

                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Contry Categorie</label>
                                    <div class="input-group input-group--append">
                                        <select name="contries" class="input js-input-select input--fluid multiple"  multiple="true"
                                            data-placeholder="">
                                          
                                            <option  value="NG" >Nigeria
                                            </option>
                                            <option  value="GN" >Guinee
                                            </option>
                                            <option  value="SN" >Senegal
                                            </option>
                                            <option  value="CI" >Côte d'Ivoire
                                            </option>


                                        </select><span class="input-group__arrow">
                                            <svg class="icon-icon-keyboard-down">
                                                <use xlink:href="#icon-keyboard-down"></use>
                                            </svg></span>
                                    </div>
                                </div>

                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Category Parent</label>
                                    <div class="input-group input-group--append">
                                        <select name="category" class="input js-input-select input--fluid"
                                            data-placeholder="">
                                            {{#each listSelect}}
                                            <option value="{{id}}">{{title}}
                                            </option>

                                            {{/each}}

                                        </select><span class="input-group__arrow">
                                            <svg class="icon-icon-keyboard-down">
                                                <use xlink:href="#icon-keyboard-down"></use>
                                            </svg></span>
                                    </div>
                                </div>

                                 <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Images Banniere</label>
                                    <div class="image-upload">
                                        <div class="image-upload__drop">
                                            <input class="image-upload__input" type="file" name="file_upload"
                                                multiple="multiple" accept="image/png, image/jpeg" />
                                            <div class="image-upload__drop-text">
                                                <svg class="icon-icon-upload">
                                                    <use xlink:href="#icon-upload"></use>
                                                </svg> <span>Drag and Drop or </span> <span
                                                    class="image-upload__drop-action text-blue">Browse</span> <span>to
                                                    upload</span>
                                            </div>
                                        </div>
                                        <ul class="image-upload__list">
                                            <li class="image-upload__item">
                                                <div class="">
                                                    <div class="image-upload__progress-icon">
                                                        <img id="image" >
                                                    </div>
                                                </div>
                                                {{!-- <div class="image-upload__action-remove">
                                                    <svg class="icon-icon-cross">
                                                        <use xlink:href="#icon-cross"></use>
                                                    </svg>
                                                </div> --}}
                                            </li>

                                        </ul>
                                    </div>
                                </div>

                                <div class="modal__footer">
                                    <div class="modal__container" style="padding:0 5px 0 0 !important">
                                        <div class="modal__footer-buttons">
                                            <div class="modal__footer-button">
                                                <button class="button button--primary button--block" type="submit"><span
                                                        class="button__text">Create</span>
                                                </button>
                                            </div>
                                            <div class="modal__footer-button">
                                                <button class="button button--secondary button--block" type="reset"
                                                    data-dismiss="modal"><span class="button__text">Cancel</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal modal--panel modal--right" id="editProduct">
    <div class="modal__overlay" data-dismiss="modal"></div>
    <div class="modal__wrap">
        <div class="modal__window scrollbar-thin" data-simplebar>
            <div class="modal__content">
                <div class="modal__header">
                    <div class="modal__container">
                        <h2 class="modal__title">edit Categories</h2>
                    </div>
                </div>
                <div class="modal__body">
                    <div class="modal__container">
                        <form method="POST" id="form-data-update">
                            <div class="row row--md">
                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Categorie Name</label>
                                    <div class="input-group">
                                        <input class="input" id="titleEdit" name="title" type="text" placeholder=""
                                            value="" required>
                                    </div>
                                </div>
                                 <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Categorie Name French</label>
                                    <div class="input-group">
                                        <input class="input" id="titleEditFrench" name="tiltleFrench" type="text" placeholder=""
                                            value="" required>
                                    </div>
                                </div>
                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Contry Categorie</label>
                                    <div class="input-group input-group--append">
                                        <select name="contries" id="contries" class="input js-input-select input--fluid multiple"  multiple="true"
                                            data-placeholder="">
                                          
                                            <option  value="NG" >Nigeria
                                            </option>
                                            <option  value="GN" >Guinee
                                            </option>
                                            <option  value="SN" >Senegal
                                            </option>
                                            <option  value="CI" >Côte d'Ivoire
                                            </option>


                                        </select><span class="input-group__arrow">
                                            <svg class="icon-icon-keyboard-down">
                                                <use xlink:href="#icon-keyboard-down"></use>
                                            </svg></span>
                                    </div>
                                </div>
                                <div class="col-12 form-group form-group--lg">
                                    <label class="form-label">Category Parent</label>
                                    <div class="input-group input-group--append">
                                        <select name="parent" class="input js-input-select input--fluid"
                                            data-placeholder="">
                                            {{#each listSelect}}
                                            <option  value="{{id}}" >{{title}}
                                            </option>

                                            {{/each}}

                                        </select><span class="input-group__arrow">
                                            <svg class="icon-icon-keyboard-down">
                                                <use xlink:href="#icon-keyboard-down"></use>
                                            </svg></span>
                                    </div>
                                </div>
                                <div class="col-12 form-group form-group--lg mb-0">
                                    <label class="form-label">Status</label>
                                    <select name="status" class="input" data-placeholder="">
                                        <option value="active" id="statusActive">Active
                                        </option>
                                        <option value="inactive" id="statusInactive">Inactive
                                        </option>
                                    </select>
                                </div>

                                <div class="modal__footer">
                                    <div class="modal__container" style="padding:0 5px 0 0 !important">
                                        <div class="modal__footer-buttons">
                                            <div class="modal__footer-button">
                                                <button class="button button--primary button--block" type="submit"><span
                                                        class="button__text">Update</span>
                                                </button>
                                            </div>
                                            <div class="modal__footer-button">
                                                <button class="button button--secondary button--block" type="reset"
                                                    data-dismiss="modal"><span class="button__text">Cancel</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal modal--panel" id="deleteCategorie">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Suprimer Categorie</h5>
            </div>
            <div class="modal-body">
                <p> Vous êtes sur de vouloir supprimer cette categorie ? si c'est le cas cliquez sur supprimer </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Annuler</button>
                <form id="form-data-delete" method="post">
                    <button class="btn btn-danger ml-2" type="submit">Suprimer</button>
                </form>
            </div>
        </div>


    </div>
</div>


    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>

<script>

    const editForm = document.getElementById('modifier');
    const titleForm = document.getElementById('titleEdit');
    const idForm = document.getElementById('idEdit');



    $('.data-delete').click(function () {
        var id = $(this).attr('data-id');
        console.log(id);
        $('#form-data-delete').attr('action', '/categories/delete/' + id);

        console.log(document.getElementById('form-data-delete'))
    });

    $('.data-update').click(function () {
        var data = $(this).attr('data-value');
        console.log(data);
        $('#form-data-update').attr('action', '/categories/edit/' + data.split('|')[0]);
        $('#titleEdit').attr('value', data.split('|')[1]);
        $('#titleEditFrench').attr('value', data.split('|')[4]);
        $('#contries').attr('value', data.split('|')[5]);
        $('#optionSelected').attr('value', data.split('|')[1]);
        

        if (data.split('|')[2] == "Active") {
            $('#statusActive').attr('selected', "true");
        } else {
            $('#statusInactive').attr('selected', "true");

        }

        console.log(document.getElementById('form-data-update'))
    });

</script>